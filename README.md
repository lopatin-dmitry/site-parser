# site-parser

## Описание
Приложение выбирает из страницы сайта содержимое статьи и сохраняет в файл.

## Приложение
Исполняемое приложение находится в папке dist.

## Запуск приложения
При запуске приложения:
- в параметрах указать url-адрес статьи, которую необходимо сохранить;
- в файле `config.yml` добавить/изменить шаблон обработки страниц.

## Алгоритм работы
Загружается страница по указанному адресу.

По названию сайта ищется конфигурация в файле `config.yml`.

Осуществляется поиск заголовка статьи и её содержимого по атрибутам, указанных в конфигурации.

Все строки больше 80 символов переносятся по словам, абзацы и заголовки отделяются пустой строкой, ссылки заменяются текстом в квадратных скобках.

Полученный текст сохраняется в файл, путь к которому формируется по адресу страницы (см. раздел "Формирование имени файла").

Ошибки, которые могут возникать в процессе работы приложения, выводятся в консоль.

## Формирование имени файла
Примеры формирования имени файла по адресу:

| **URL**                          | **File**                          |
|----------------------------------|:----------------------------------|
| https://site.com/path/index.html | [CUR_DIR]/site.com/path/index.txt |
| https://site.com/page-name.shtml | [CUR_DIR]/site.com/page-name.txt  |
| https://site.com/path/           | [CUR_DIR]/site.com/path/index.txt |
| https://site.com                 | [CUR_DIR]/site.com/index.txt      |

## Структура файла конфигурации `config.yml`
Пример для сайта lenta.ru:
```
lenta_ru:                       <- Название сайта. Все точки в имени заменяются на нижнее подчеркивание.    
  article:                      <- Параметры для поиска блока статьи
    tag: div                    <- Имя тега, в котором содержится статья.
    class: topic-body           \ Для поиска блока используется только один параметр.
    itemprop: topic-body        / Если указаны оба, используется class.
  title:                        <- Параметры для поиска заголовка статьи.
    tag: span
    class: topic-body__title
  content:                      <- Параметры для поиска содержимого статьи.
    tag: div
    class: topic-body__content
    divs:                       <- Список тегов, из которых необходимо выбирать текст. 
      - p
      - h2
```

## Возможные доработки
Прикладные:
- Многостраничная выгрузка. Список сайтов задавать в файле. 
- Выгрузка изображений и проставление ссылок на них в тексте.

Технические:
- Обработка исключений.
- Логирование.

## Примеры
Примеры работы приложения находятся в папке examples.